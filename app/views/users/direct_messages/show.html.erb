<main class="bg-white shadow-sm">
  <p id="notice"></p>
  <div class='container'>
    <div class='row'>
      <div class="col-md-3">
      <%= render 'users/shared/user_info', user: @user %>
      </div>
      <div class='col-md-9 pb-3'>
        <h4><%= @user.name %>さんとのチャット</h4>
        <div class="message">
          <%= form_with model: @direct_message do |f| %>
            <%= f.text_area :message, class:"form-control shadow-sm" %>
            <%= f.hidden_field :room_id %>
            <%= f.submit '送信する', class:"btn btn-success" %>
          <% end %>
        </div>
        <div class="form-inline">
          <% @direct_messages.each do |dm| %>
          <% if dm.user == current_user %>
            <tr class="row justify-content-center">
              <td class="col-2  mt-3">
              </td>
              <td class="col-9 mt-3">
                <%= dm.user.name %> <br>
                <div class="says">
                  <p><%= safe_join(dm.message.split("\n"),tag(:br)) %></p>
                  <span><%=  dm.created_at.strftime('%Y/%m/%d %H:%M') %></span>
                </div>
              </td>
            </tr>
          <% else %>
            <tr class="row justify-content-center">
              <td class="col-9 mt-3">
                <div class="col-11 float-right">
                  <%= dm.user.name %> <br>
                </div>
                <div class="other-user-says">
                  <p><%= safe_join(dm.message.split("\n"),tag(:br)) %></p>
                  <span><%=  dm.created_at.strftime('%Y/%m/%d %H:%M') %></span>
                </div>
              </td>
              <td class="col-2 mt-3">
              </td>
            </tr>
          <% end %>
        <% end %>
        </div>
        <div>
      </div>
      </div>
    </div>
  </div>
</main>


